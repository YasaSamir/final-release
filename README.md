# تطبيق مشاركة الرحلات مع الذكاء الاصطناعي

تطبيق متكامل لمشاركة الرحلات مع دعم الذكاء الاصطناعي لتحسين تجربة المستخدم وزيادة كفاءة النظام.

## نظرة عامة

يتكون المشروع من ثلاثة أجزاء رئيسية:

1. **الواجهة الأمامية (Frontend)**: تطبيق Flutter يوفر واجهة مستخدم سلسة وتفاعلية.
2. **الخادم الخلفي (Backend)**: خادم Node.js يدير طلبات الرحلات والاتصال في الوقت الفعلي.
3. **خدمة الذكاء الاصطناعي (AI Service)**: خدمة Python Flask توفر تنبؤات ذكية لمشاركة الرحلات.

## الميزات الرئيسية

- **طلب رحلة**: يمكن للمستخدمين طلب رحلة وتحديد نقطة الالتقاط والوجهة.
- **قبول الرحلة**: يمكن للسائقين قبول طلبات الرحلات ورؤية تفاصيلها.
- **مشاركة الرحلة**: يمكن للمستخدمين طلب مشاركة رحلة موجودة.
- **تنبؤات الذكاء الاصطناعي**: يقدم النظام تنبؤات ذكية حول ما إذا كانت مشاركة الرحلة مفيدة أم لا.
- **حساب التوفير**: يقدر النظام التوفير المالي والبيئي من مشاركة الرحلة.
- **الاتصال في الوقت الفعلي**: يوفر النظام اتصالًا في الوقت الفعلي بين المستخدمين والسائقين.

## المتطلبات

- Node.js 14+
- Python 3.9+
- Flutter 2.5+
- Docker و Docker Compose (للتشغيل باستخدام Docker)

## التثبيت والتشغيل

### باستخدام Docker

1. قم بتنزيل المشروع:
   ```bash
   git clone https://github.com/yourusername/ride-sharing-ai.git
   cd ride-sharing-ai
   ```

2. قم ببناء وتشغيل الحاويات:
   ```bash
   docker-compose up --build
   ```

3. الوصول إلى التطبيق:
   - الواجهة الأمامية: http://localhost:8080
   - الخادم الخلفي: http://localhost:3000
   - خدمة الذكاء الاصطناعي: http://localhost:5000

### التثبيت اليدوي

#### الخادم الخلفي

1. انتقل إلى مجلد الخادم الخلفي:
   ```bash
   cd backend
   ```

2. قم بتثبيت المتطلبات:
   ```bash
   npm install
   ```

3. قم بتشغيل الخادم:
   ```bash
   node app.js
   ```

#### خدمة الذكاء الاصطناعي

1. انتقل إلى مجلد خدمة الذكاء الاصطناعي:
   ```bash
   cd ai_service
   ```

2. قم بإنشاء بيئة Python افتراضية:
   ```bash
   python -m venv venv
   source venv/bin/activate  # على Linux/Mac
   venv\Scripts\activate  # على Windows
   ```

3. قم بتثبيت المتطلبات:
   ```bash
   pip install -r requirements.txt
   ```

4. قم بتشغيل الخدمة:
   ```bash
   python app.py
   ```

#### الواجهة الأمامية

1. انتقل إلى مجلد الواجهة الأمامية:
   ```bash
   cd project
   ```

2. قم بتثبيت المتطلبات:
   ```bash
   flutter pub get
   ```

3. قم بتشغيل التطبيق:
   ```bash
   flutter run -d chrome
   ```

## واجهة برمجة التطبيقات (API)

### الخادم الخلفي

- `POST /api/rides`: إنشاء طلب رحلة جديد
- `GET /api/rides`: الحصول على قائمة الرحلات
- `GET /api/rides/:rideId`: الحصول على تفاصيل رحلة محددة
- `PUT /api/rides/:rideId`: تحديث حالة رحلة
- `POST /api/drivers`: إنشاء سائق جديد
- `GET /api/drivers`: الحصول على قائمة السائقين

### خدمة الذكاء الاصطناعي

- `POST /predict`: التنبؤ بما إذا كانت مشاركة الرحلة مفيدة أم لا
- `POST /train`: تدريب نموذج الذكاء الاصطناعي باستخدام بيانات جديدة
- `GET /health`: فحص صحة خدمة الذكاء الاصطناعي

## الاتصال في الوقت الفعلي

يستخدم المشروع Socket.IO للاتصال في الوقت الفعلي بين المستخدمين والسائقين. الأحداث الرئيسية هي:

- `ride:request`: طلب رحلة جديد
- `ride:created`: تم إنشاء طلب رحلة
- `ride:new_request`: إشعار للسائقين بطلب رحلة جديد
- `ride:accept`: قبول السائق للرحلة
- `ride:accepted`: إشعار للمستخدم بقبول الرحلة
- `ride:reject`: رفض السائق للرحلة
- `ride:rejected`: إشعار للمستخدم برفض الرحلة
- `ride:sharing_request`: طلب مشاركة رحلة
- `ride:sharing_requested`: تم إرسال طلب مشاركة الرحلة
- `ride:sharing_opportunity`: فرصة مشاركة رحلة متاحة
- `ride:sharing_response`: رد السائق على طلب مشاركة الرحلة
- `ride:sharing_accepted`: تم قبول طلب مشاركة الرحلة
- `ride:sharing_rejected`: تم رفض طلب مشاركة الرحلة

## المساهمة

نرحب بالمساهمات! يرجى إرسال طلبات السحب (Pull Requests) أو فتح مشكلات (Issues) للمساعدة في تحسين هذا المشروع.

## الترخيص

هذا المشروع مرخص بموجب رخصة MIT.
